# BOUSSOURA Mohamed Cherif , Boufarik-Blida-ALGERIA , 14:25 pm 05-12-2020

# This code run with Python3

import socket
chunk_size = 4*1024

class ServerConnection:
    
    def __init__(self):
        """creates a TCP socket for server
        """
        self.socket = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
    
    def CreateConnection(self,ip="",port=8080):
        self.server_ip = ip
        self.server_port = port
        self.address = (self.server_ip,self.server_port)
        self.socket.bind(self.address)
    
    def Listen(self,backlog = 5):
        self.socket.listen(backlog)
    
    def AcceptConnection(self):
        self.client_conn , self.client_address = self.socket.accept()
        print("\t\t[*] Connection established with"+self.client_address[0]+" on port "+str(self.client_address[1]))
        return (self.client_conn,self.client_address)

    def send_data(self,user_input):
        user_input_bytes = bytes(user_input,"utf-8")
        self.client_conn.send(user_input_bytes)
    
    def receive_data(self):
        received_data_bytes = self.client_conn.recv(chunk_size)
        self.data = received_data_bytes.decode("utf-8")
        return self.data

